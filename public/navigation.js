/* Autogenerated from "/navigation.coffee" - 2013-04-10 22:12:10 +0000 */

(function() {

  $(function() {
    var $compass, $directions, $left, $right, $wheel, degree, index, jump_sky, percentage, rotate, slide_sky, turningLeft, turningRight,
      _this = this;
    $wheel = $(".steering-wheel");
    $compass = $("#spinner");
    $left = $("#left");
    $right = $("#right");
    $directions = $(".directions");
    index = 4;
    degree = 0;
    percentage = 0;
    turningLeft = false;
    turningRight = false;
    rotate = function(degree) {
      $wheel.css({
        transform: "rotate(" + degree + "deg)"
      });
      return $compass.css({
        transform: "rotate(" + degree / 4 + "deg)"
      });
    };
    jump_sky = function(percentage) {
      return $directions.css({
        "left": +percentage + "%"
      });
    };
    slide_sky = function(percentage) {
      return $directions.animate({
        "left": +percentage + "%"
      }, 3000, function() {
        turningLeft = false;
        return turningRight = false;
      });
    };
    $left.on("click", function() {
      if (turningLeft !== true) {
        turningRight = false;
        $directions.stop();
        turningLeft = true;
        if (index === 4) {
          index = 1;
          percentage -= 400;
          jump_sky(percentage);
        } else {
          index += 1;
        }
        percentage += 100;
        slide_sky(percentage);
        degree -= 360;
        return rotate(degree);
      }
    });
    return $right.on("click", function() {
      if (turningRight !== true) {
        turningLeft = false;
        $directions.stop();
        turningRight = true;
        if (index === 0) {
          percentage += 400;
          jump_sky(percentage);
          index = 3;
        } else {
          index -= 1;
        }
        percentage -= 100;
        slide_sky(percentage);
        degree += 360;
        return rotate(degree);
      }
    });
  });

}).call(this);
